<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>لوحة الأدمن | Moaz Elsawy</title>
<link rel="stylesheet" href="style.css">
<style>
  .admin-container {
    max-width: 800px;
    margin: 50px auto;
    background: #fff;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  }
  .admin-container h2 {
    color: #0a74da;
    text-align: center;
    margin-bottom: 20px;
  }
  .admin-container form input,
  .admin-container form select,
  .admin-container form textarea {
    width: 100%;
    padding: 10px;
    margin: 8px 0;
    border-radius: 6px;
    border: 1px solid #ccc;
    box-sizing: border-box;
  }
  .admin-container form label {
    font-weight: bold;
    margin-top: 10px;
    display: block;
  }
  .admin-container form button {
    margin-top: 15px;
    padding: 12px;
    width: 100%;
    background: #0a74da;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
  }
  .admin-container form button:hover {
    background: #005bb5;
  }
  .property-list-admin {
    margin-top: 30px;
  }
  .property-card-admin {
    background: #f9f9f9;
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .property-card-admin span {
    font-weight: bold;
    color: #0a74da;
  }
  .property-card-admin button {
    background: red;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 6px;
    cursor: pointer;
  }
</style>
</head>
<body>
<div class="admin-container">
  <h2>لوحة الأدمن - إدارة العقارات</h2>
  <form id="addPropertyForm">
    <label>العنوان</label>
    <input type="text" id="title" required>

    <label>النوع</label>
    <select id="type" required>
      <option value="">اختر النوع</option>
      <option value="شقة">شقة</option>
      <option value="فيلا">فيلا</option>
    </select>

    <label>المساحة (م²)</label>
    <input type="number" id="size" required>

    <label>الموقع (اختياري)</label>
    <input type="text" id="city">

    <label>عدد الغرف</label>
    <input type="number" id="rooms" required>

    <label>السعر</label>
    <input type="text" id="price" required>

    <label>الصورة (رابط URL)</label>
    <input type="url" id="img" required>

    <label>الوصف</label>
    <textarea id="desc" rows="3"></textarea>

    <label>
      <input type="checkbox" id="inSlider"> إظهار في السلايدر
    </label>

    <button type="submit">إضافة العقار</button>
  </form>

  <div class="property-list-admin" id="adminPropertyList">
    <!-- قائمة العقارات الحالية -->
  </div>
</div>

<script>
const form = document.getElementById('addPropertyForm');
const adminList = document.getElementById('adminPropertyList');

// تحميل العقارات من LocalStorage
let properties = JSON.parse(localStorage.getItem('rs_local_props') || '[]');

function displayAdminProperties() {
  adminList.innerHTML = '';
  properties.forEach((p, idx) => {
    const div = document.createElement('div');
    div.className = 'property-card-admin';
    div.innerHTML = `
      <div>
        <span>${p.title}</span> - ${p.type} - ${p.size}م² - ${p.city || 'لا يوجد موقع'} - ${p.rooms} غرف - ${p.price}
      </div>
      <button onclick="deleteProperty(${idx})">حذف</button>
    `;
    adminList.appendChild(div);
  });
}

function deleteProperty(idx) {
  if(!confirm('هل تريد حذف هذا العقار؟')) return;
  properties.splice(idx,1);
  localStorage.setItem('rs_local_props', JSON.stringify(properties));
  displayAdminProperties();
}

form.addEventListener('submit', e => {
  e.preventDefault();
  const newProp = {
    id: Date.now(),
    title: document.getElementById('title').value.trim(),
    type: document.getElementById('type').value,
    size: document.getElementById('size').value,
    city: document.getElementById('city').value.trim(),
    rooms: document.getElementById('rooms').value,
    price: document.getElementById('price').value.trim(),
    img: document.getElementById('img').value.trim(),
    desc: document.getElementById('desc').value.trim(),
    inSlider: document.getElementById('inSlider').checked
  };

  properties.unshift(newProp); // يضيف في البداية
  localStorage.setItem('rs_local_props', JSON.stringify(properties));
  displayAdminProperties();
  form.reset();
  alert('تم إضافة العقار بنجاح ✅');
});

// عرض العقارات عند تحميل الصفحة
displayAdminProperties();
</script>
</body>
</html>
