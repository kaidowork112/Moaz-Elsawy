<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Moaz Elsawy | ุชุณููู ุนูุงุฑู</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header class="header">
  <div class="logo">๐ Moaz Elsawy</div>
  <nav>
    <a href="index.html">ุงูุฑุฆูุณูุฉ</a>
    <a href="#properties">ุงูุนูุงุฑุงุช</a>
    <a href="#contact">ุชูุงุตู ูุนูุง</a>
    <a href="login.html" class="btn">ุชุณุฌูู ุงูุฏุฎูู</a>
  </nav>
</header>

<section class="slider" id="slider">
  <div class="slides-container">
    <div class="slide active" style="background-image:url('https://picsum.photos/1200/600?random=1')">
      <div class="caption">ุดูู ูุงุฎุฑุฉ ููุจูุน ูู ุงููุงูุฑุฉ</div>
    </div>
    <div class="slide" style="background-image:url('https://picsum.photos/1200/600?random=2')">
      <div class="caption">ููู ูููุฒุฉ ูู ุงูุชุฌูุน ุงูุฎุงูุณ</div>
    </div>
    <div class="slide" style="background-image:url('https://picsum.photos/1200/600?random=3')">
      <div class="caption">ุนูุงุฑุงุช ุจุฅุทูุงูุงุช ุจุญุฑูุฉ ุฑุงุฆุนุฉ</div>
    </div>
  </div>
</section>

<section id="properties" class="properties">
  <h2>ุงูุนูุงุฑุงุช ุงููุชุงุญุฉ</h2>
  <div id="property-list" class="property-list"></div>
</section>

<section id="contact" class="contact">
  <h2>ุชูุงุตู ูุนูุง</h2>
  <form id="contactForm">
    <input type="text" placeholder="ุงูุงุณู ุงููุงูู" required>
    <input type="email" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" required>
    <textarea placeholder="ุฑุณุงูุชู..." required></textarea>
    <button type="submit">ุฅุฑุณุงู</button>
  </form>
</section>

<footer>
  <p>ยฉ 2025 Moaz Elsawy | ุฌููุน ุงูุญููู ูุญููุธุฉ</p>
</footer>

<!-- ุงูููุฏุงู -->
<div id="propertyModal" class="modal">
  <div class="modal-content">
    <span class="close-button">&times;</span>
    <div id="modalDetails">
      <img id="modalImg" src="" alt="ุตูุฑุฉ ุงูุนูุงุฑ">
      <h2 id="modalTitle"></h2>
      <p><strong>ุงูุณุนุฑ:</strong> <span id="modalPriceDetail"></span></p>
      <p><strong>ุงููููุน:</strong> <span id="modalCity"></span></p>
      <p><strong>ุงูููุน:</strong> <span id="modalType"></span></p>
      <p><strong>ุนุฏุฏ ุงูุบุฑู:</strong> <span id="modalRooms"></span></p>
      <p><strong>ุงููุตู:</strong> <span id="modalDesc"></span></p>
      <a id="whatsappLink" href="#" target="_blank" class="btn whatsapp-btn">ุชูุงุตู ูุงุชุณุงุจ (ุงุณุชูุณุฑ ุงูุขู)</a>
    </div>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

// ุฅุนุฏุงุฏ Firebase
const firebaseConfig = {
  apiKey: "AIzaSyBxEWaPWqpUIgZtasxnE7-82SN6OEzSx7Q",
  authDomain: "moaz-elsawy.firebaseapp.com",
  projectId: "moaz-elsawy",
  storageBucket: "moaz-elsawy.firebasestorage.app",
  messagingSenderId: "859568017117",
  appId: "1:859568017117:web:38a7d0c96532f0f7681534",
  measurementId: "G-JY1XN1VRCP"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// ุงูุฒุฑุงุฑ ุงูุฎุงุต ุจุงููุงุชุณุงุจ
const SELLER_PHONE = '+201115134784';

// ุงูุณูุงูุฏุฑ
let currentSlide = 0;
const slides = document.querySelectorAll(".slide");
function showSlide(index){
  slides.forEach((s,i)=>{ s.classList.remove("active"); if(i===index)s.classList.add("active"); });
}
function nextSlide(){ currentSlide=(currentSlide+1)%slides.length; showSlide(currentSlide); }
setInterval(nextSlide,5000);

// ุชุญููู ุงูุนูุงุฑุงุช
async function loadProperties(){
  const listContainer = document.getElementById("property-list");
  listContainer.innerHTML = '';

  const snapshot = await getDocs(collection(db,"properties"));
  const allProperties = [];
  snapshot.forEach(docSnap => allProperties.push({ id: docSnap.id, ...docSnap.data() }));

  if(allProperties.length === 0){
    listContainer.innerHTML = '<p style="text-align:center; padding:40px 0; color:#666;">ูุง ุชูุฌุฏ ุนูุงุฑุงุช ุญุงููุงู.</p>';
    return;
  }

  allProperties.forEach((prop)=>{
    const card = document.createElement("div");
    card.className = "property-card";
    card.dataset.id = prop.id;
    card.innerHTML = `
      <img src="${prop.img}" alt="${prop.title}">
      <div class="property-info">
        <h3>${prop.title}</h3>
        <p><strong>ุงููููุน:</strong> ${prop.location}</p>
        <p><strong>ุงูุบุฑู:</strong> ${prop.rooms || 'ุ'}</p>
        <span>${prop.price}</span>
      </div>
    `;
    listContainer.appendChild(card);

    card.addEventListener('click',()=>openModal(prop));
  });
}

// ูุชุญ ุงูููุฏุงู
function openModal(prop){
  document.getElementById('modalImg').src = prop.img;
  document.getElementById('modalTitle').textContent = prop.title;
  document.getElementById('modalPriceDetail').textContent = prop.price;
  document.getElementById('modalCity').textContent = prop.location;
  document.getElementById('modalType').textContent = prop.type || 'ุบูุฑ ูุญุฏุฏ';
  document.getElementById('modalRooms').textContent = prop.rooms || 'ุ';
  document.getElementById('modalDesc').textContent = prop.desc || 'ูุง ููุฌุฏ ูุตู ูุชุงุญ.';
  document.getElementById('whatsappLink').href = `https://wa.me/${SELLER_PHONE}?text=${encodeURIComponent('ูุฑุญุจุงูุ ุฃูุฏ ุงูุงุณุชูุณุงุฑ ุนู ุงูุนูุงุฑ: '+prop.title+'ุ ูู ูุฏููุฉ: '+prop.location+'. ุณุนุฑู: '+prop.price)}`;
  document.getElementById('propertyModal').style.display='block';
}

// ุฅุบูุงู ุงูููุฏุงู
document.querySelector('.close-button').onclick = ()=>{ document.getElementById('propertyModal').style.display='none'; }
window.onclick = (e)=>{ if(e.target==document.getElementById('propertyModal')) document.getElementById('propertyModal').style.display='none'; }

// ูููุฐุฌ ุงูุชูุงุตู
document.getElementById("contactForm").addEventListener("submit",(e)=>{
  e.preventDefault(); alert("ุชู ุฅุฑุณุงู ุฑุณุงูุชู ุจูุฌุงุญ โ"); e.target.reset();
});

document.addEventListener("DOMContentLoaded",loadProperties);
</script>
</body>
</html>
