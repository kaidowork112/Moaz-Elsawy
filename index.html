<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Moaz Elsawy | ØªØ³ÙˆÙŠÙ‚ Ø¹Ù‚Ø§Ø±ÙŠ</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<header class="header">
  <div class="logo">ğŸ  Moaz Elsawy</div>
  <nav>
    <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a href="#properties">Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</a>
    <a href="#contact">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a>
    <a href="login-register.html" class="btn" id="loginBtn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
  </nav>
</header>

<section class="slider" id="slider">
  <div class="slides-container" id="sliderContainer"></div>
</section>

<section id="properties" class="properties">
  <h2>Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</h2>
  <div id="property-list" class="property-list"></div>
</section>

<section id="contact" class="contact">
  <h2>ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h2>
  <form id="contactForm">
    <input type="text" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required>
    <input type="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
    <textarea placeholder="Ø±Ø³Ø§Ù„ØªÙƒ..." required></textarea>
    <button type="submit">Ø¥Ø±Ø³Ø§Ù„</button>
  </form>
</section>

<footer>
<p>Â© 2025 Moaz Elsawy | Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBxEWaPWqpUIgZtasxnE7-82SN6OEzSx7Q",
  authDomain: "moaz-elsawy.firebaseapp.com",
  projectId: "moaz-elsawy",
  storageBucket: "moaz-elsawy.firebasestorage.app",
  messagingSenderId: "859568017117",
  appId: "1:859568017117:web:38a7d0c96532f0f7681534",
  measurementId: "G-JY1XN1VRCP",
  databaseURL: "https://moaz-elsawy-default-rtdb.firebaseio.com"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// =========================
// Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
// =========================
const loginBtn = document.getElementById('loginBtn');
const user = JSON.parse(localStorage.getItem('realestate_user')||'{}');
if(user.email){
  loginBtn.textContent = 'ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬';
  loginBtn.href = '#';
  loginBtn.onclick = e=>{ e.preventDefault(); localStorage.removeItem('realestate_user'); location.reload(); };
}

// =========================
// Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø³Ù„Ø§ÙŠØ¯Ø±
// =========================
const sliderContainer = document.getElementById('sliderContainer');
const propertyList = document.getElementById('property-list');

onValue(ref(db,'properties/'), snapshot=>{
  const data = snapshot.val()||{};
  sliderContainer.innerHTML = '';
  propertyList.innerHTML = '';
  Object.values(data).forEach(p=>{
    if(p.inSlider){
      const div = document.createElement('div');
      div.className='slide';
      div.style.backgroundImage=`url(${p.img})`;
      sliderContainer.appendChild(div);
    }
    if(p.city){
      const card = document.createElement('div');
      card.className='property-card';
      card.innerHTML = `
        <img src="${p.img}" alt="${p.title}">
        <div class="property-info">
          <h3>${p.title}</h3>
          <p><strong>Ø§Ù„Ù…ÙˆÙ‚Ø¹:</strong> ${p.city}</p>
          <p><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> ${p.type}</p>
          <p><strong>Ø§Ù„Ù…Ø³Ø§Ø­Ø©:</strong> ${p.size}Ù…Â²</p>
          <p><strong>Ø§Ù„ØºØ±Ù:</strong> ${p.rooms}</p>
          <span>${p.price}</span>
        </div>
      `;
      propertyList.appendChild(card);
    }
  });
  // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠ
  const slides = document.querySelectorAll('.slide');
  let current = 0;
  function nextSlide(){
    slides.forEach(s=>s.style.opacity=0);
    slides[current].style.opacity=1;
    current=(current+1)%slides.length;
  }
  if(slides.length) setInterval(nextSlide,3000);
});

// Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙˆØ§ØµÙ„
document.getElementById('contactForm').addEventListener('submit',e=>{
  e.preventDefault();
  alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­ âœ…');
  e.target.reset();
});
</script>

</body>
</html>
